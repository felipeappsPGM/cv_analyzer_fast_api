# üìö Documenta√ß√£o T√©cnica - Sistema de An√°lise de Curr√≠culos com LLM

## üìã Especifica√ß√£o de Requisitos

### üéØ Objetivo
Este documento descreve os requisitos do sistema que realiza an√°lise de curr√≠culos baseada em vagas de emprego, utilizando modelos de linguagem (LLM) e LangGraph.

### üîç Escopo
O sistema permite que recrutadores registrem vagas, enviem curr√≠culos e recebam an√°lise autom√°tica que indica a compatibilidade de cada candidato.

### üë• Usu√°rios do Sistema
- **Recruiters**: Profissionais de RH respons√°veis pelo recrutamento
- **HR Analysts**: Analistas que avaliam relat√≥rios e m√©tricas
- **Candidates**: Candidatos que se inscrevem para vagas
- **Company Owners**: Propriet√°rios que gerenciam empresas

### üõ†Ô∏è Tecnologias
- **Backend**: LangGraph, LLM APIs (OpenAI, Anthropic, Groq, Gemini), PostgreSQL, Python
- **Frontend**: Tailwind CSS, TypeScript, Next.js
- **Infrastructure**: Node.js, NestJS, RabbitMQ, Docker

### üöß Restri√ß√µes
- Acesso a APIs de LLM
- Limites de tokens
- Custos de API

## üìù Casos de Uso

### UC01: Cadastro de Vaga
**Ator Principal:** Recruiter/HR Analyst  
**Objetivo:** Registrar nova vaga de emprego no sistema  
**Pr√©-condi√ß√µes:** Usu√°rio autenticado e vinculado a empresa  

### UC02: Upload de Curr√≠culo
**Ator Principal:** Candidate  
**Objetivo:** Enviar curr√≠culo para an√°lise  
**Pr√©-condi√ß√µes:** Candidato registrado no sistema  

### UC03: An√°lise de Curr√≠culo
**Ator Principal:** Sistema (LLM + LangGraph)  
**Objetivo:** Processar e analisar compatibilidade curr√≠culo-vaga  
**Trigger:** Upload de curr√≠culo ou aplica√ß√£o para vaga  

### UC04: Visualiza√ß√£o e Relat√≥rios
**Ator Principal:** Recruiter/HR Analyst  
**Objetivo:** Visualizar rankings e relat√≥rios de candidatos  
**Pr√©-condi√ß√µes:** An√°lises processadas dispon√≠veis  

## ‚öôÔ∏è Requisitos Funcionais

| ID | Descri√ß√£o |
|---|---|
| **RF01** | O sistema deve permitir registro de vagas de emprego |
| **RF02** | O sistema deve permitir registro de usu√°rios |
| **RF03** | O usu√°rio deve poder criar perfil profissional |
| **RF04** | O usu√°rio deve poder registrar experi√™ncia profissional, forma√ß√£o acad√™mica e cursos |
| **RF05** | O sistema deve permitir candidatura a vagas |
| **RF06** | Usu√°rios vinculados a empresas podem registrar vagas |
| **RF07** | O sistema deve permitir envio de curr√≠culos |
| **RF08** | O sistema deve processar curr√≠culos com LLM + LangGraph |
| **RF09** | O sistema deve realizar an√°lise de compatibilidade perfil-vaga |
| **RF10** | O sistema deve gerar classifica√ß√£o de curr√≠culos por vaga |
| **RF11** | O sistema deve gerar relat√≥rios em PDF |
| **RF12** | O sistema deve permitir visualiza√ß√£o de resultados |
| **RF13** | O sistema deve permitir visualiza√ß√£o por vaga e por usu√°rio |

## üîß Requisitos N√£o-Funcionais

| ID | Categoria | Descri√ß√£o |
|---|---|---|
| **RNF01** | Performance | Resposta dentro de 2 minutos |
| **RNF02** | Usabilidade | Interface responsiva |
| **RNF03** | Seguran√ßa | Garantir seguran√ßa dos dados (LGPD) |
| **RNF04** | Disponibilidade | Alta disponibilidade |
| **RNF05** | Escalabilidade | Capacidade de escalar |
| **RNF06** | Manutenibilidade | Arquitetura baseada em grafos (LangGraph) |

## üìê Regras de Neg√≥cio

### Sistema de Pontua√ß√£o

| ID | Regra | Peso |
|---|---|---|
| **BR01** | Avalia√ß√£o de experi√™ncia profissional | 35% |
| **BR02** | Avalia√ß√£o de forma√ß√£o acad√™mica | 30% |
| **BR03** | Avalia√ß√£o de cursos profissionalizantes | 20% |
| **BR04** | Avalia√ß√£o de pontos fortes | 15% |
| **BR05** | Avalia√ß√£o de pontos fracos | -10% |

### F√≥rmula de C√°lculo
```
Score Final = (Experi√™ncia √ó 0.35) + (Forma√ß√£o √ó 0.30) + (Cursos √ó 0.20) + (Pontos Fortes √ó 0.15) - (Pontos Fracos √ó 0.10)
```

### Outras Regras

| ID | Descri√ß√£o |
|---|---|
| **BR06** | Score final √© a soma ponderada dos crit√©rios |
| **BR07** | Usu√°rio pode registrar dados sem perfil profissional completo |
| **BR08** | Usu√°rio pode se candidatar apenas uma vez por vaga |

## üë§ User Stories

### √âpico: Gest√£o de Candidatos

**US01: Registro de Candidato**
```
Como: usu√°rio candidato
Eu quero: poder me registrar no sistema
Para: acessar o sistema
```

**US02: Cria√ß√£o de Perfil Profissional**
```
Como: usu√°rio candidato
Eu quero: poder criar um perfil profissional
Para: atribuir experi√™ncia profissional, forma√ß√£o acad√™mica e cursos
```

**US03: Registro de Experi√™ncias**
```
Como: usu√°rio candidato
Eu quero: poder registrar experi√™ncia profissional, forma√ß√£o acad√™mica e/ou cursos
Para: atribuir a um perfil profissional
```

### √âpico: Gest√£o de Vagas e Recrutamento

**US04: Visualiza√ß√£o de Rankings**
```
Como: usu√°rio de recursos humanos
Eu quero: poder visualizar o ranking dos candidatos de uma vaga
Para: selecionar os candidatos compat√≠veis
```

**US05: Registro de Vagas**
```
Como: usu√°rio de recursos humanos
Eu quero: poder registrar uma vaga de emprego
Para: que candidatos se candidatem
```

**US06: Gest√£o de Empresa**
```
Como: usu√°rio owner
Eu quero: poder registrar uma empresa
Para: adicionar analistas de RH e vagas de emprego
```

## üóÑÔ∏è Modelo de Dados

### Diagrama Entidade-Relacionamento

```mermaid
erDiagram
    Users ||--o{ Company : "belongs_to"
    Users ||--o{ ProfessionalProfile : "has"
    Users ||--o{ Curriculum : "uploads"
    Users ||--o{ ApplicationJob : "applies"
    
    Company ||--o{ Job : "posts"
    Company ||--o{ Address : "located_at"
    
    Job ||--o{ ApplicationJob : "receives"
    
    ProfessionalProfile ||--o{ ProfessionalExperience : "includes"
    ProfessionalProfile ||--o{ AcademicBackground : "includes"
    ProfessionalProfile ||--o{ ProfessionalCourses : "includes"
    
    ApplicationJob ||--|| AnalyzeApplicationJob : "generates"
    
    Users {
        uuid user_id PK
        string user_name
        string user_email UK
        string password
        boolean is_work
        string user_type
        date birth_day
        datetime created_date
        datetime updated_date
        datetime deleted_date
    }
    
    Company {
        uuid company_id PK
        string company_name
        string area_of_activity
        string cnpj UK
        uuid address_id FK
        datetime created_date
    }
    
    Job {
        uuid job_id PK
        string job_name
        string activities
        string pre_requisites
        string differentials
        uuid company_id FK
        string code_vacancy_job UK
        datetime created_date
    }
    
    ProfessionalProfile {
        uuid professional_profile_id PK
        string professional_profile_name
        string professional_profile_description
        uuid user_id FK
        datetime created_date
    }
    
    Curriculum {
        uuid curriculum_id PK
        string file_base64
        string file_path
        string file_name UK
        boolean is_work
        uuid user_id FK
        datetime created_date
    }
    
    ApplicationJob {
        uuid application_job_id PK
        uuid professional_profile_id FK
        uuid job_id FK
        uuid user_id FK
        datetime created_date
    }
    
    AnalyzeApplicationJob {
        uuid analyze_application_job_id PK
        uuid professional_profile_id FK
        float academic_score
        float professional_experience_score
        float professional_courses_score
        float weak_points_score
        float strong_points_score
        float total_score
        string opinion_application_job
        uuid user_id FK
        datetime created_date
    }
```

### Entidades Detalhadas

#### üë§ Users (Usu√°rios)
**Prop√≥sito:** Armazenar informa√ß√µes dos usu√°rios do sistema  
**Campos Principais:** 
- `user_id` (PK): Identificador √∫nico
- `user_email` (UK): Email √∫nico para login
- `user_type`: Tipo de usu√°rio (admin, recruiter, candidate)
- `is_work`: Indica se √© usu√°rio corporativo

#### üè¢ Company (Empresas)
**Prop√≥sito:** Informa√ß√µes das empresas que utilizam o sistema  
**Relacionamentos:** 
- Possui endere√ßo (Address)
- Publica vagas (Job)
- Tem usu√°rios vinculados

#### üíº Job (Vagas)
**Prop√≥sito:** Vagas de emprego dispon√≠veis  
**Campos Principais:**
- `activities`: Atividades da vaga
- `pre_requisites`: Pr√©-requisitos obrigat√≥rios
- `differentials`: Diferenciais desejados

#### üìÑ ProfessionalProfile (Perfil Profissional)
**Prop√≥sito:** Perfil profissional completo do candidato  
**Composi√ß√£o:**
- Experi√™ncias profissionais
- Forma√ß√£o acad√™mica
- Cursos profissionalizantes

#### üìä AnalyzeApplicationJob (An√°lise de Candidatura)
**Prop√≥sito:** Resultado da an√°lise de IA  
**Scores Calculados:**
- Academic: 30%
- Professional Experience: 35% 
- Courses: 20%
- Strong Points: +15%
- Weak Points: -10%

## üîÑ Fluxos de Processo

### Fluxo de An√°lise de Curr√≠culo

```mermaid
flowchart TD
    A[Candidato aplica para vaga] --> B[Sistema recebe curr√≠culo]
    B --> C[LangGraph inicia processamento]
    C --> D[Extra√ß√£o de dados do curr√≠culo]
    D --> E[An√°lise de compatibilidade]
    E --> F[C√°lculo de scores ponderados]
    F --> G[Gera√ß√£o de opini√£o textual]
    G --> H[Armazenamento dos resultados]
    H --> I[Notifica√ß√£o ao recrutador]
    I --> J[Atualiza√ß√£o do ranking]
```

### Fluxo de Cadastro e Candidatura

```mermaid
flowchart TD
    A[Usu√°rio se registra] --> B[Cria perfil profissional]
    B --> C[Adiciona experi√™ncias]
    C --> D[Adiciona forma√ß√£o]
    D --> E[Adiciona cursos]
    E --> F[Faz upload do curr√≠culo]
    F --> G[Busca vagas dispon√≠veis]
    G --> H[Aplica para vaga]
    H --> I[An√°lise autom√°tica iniciada]
```

## üß™ Cen√°rios de Teste

### Cen√°rios de Aceita√ß√£o

#### Teste: Cria√ß√£o de Perfil Profissional
```gherkin
Dado que sou um candidato logado
Quando acesso a p√°gina de perfil profissional
E preencho nome e descri√ß√£o
E clico em "Salvar"
Ent√£o o perfil deve ser criado com sucesso
E devo ver mensagem de confirma√ß√£o
```

#### Teste: An√°lise de Curr√≠culo
```gherkin
Dado que uma vaga est√° cadastrada
E um candidato aplicou com curr√≠culo v√°lido
Quando o sistema processa a an√°lise
Ent√£o deve calcular scores para todas as categorias
E o score total deve estar entre 0 e 100
E deve gerar opini√£o textual explicativa
```

#### Teste: Ranking de Candidatos
```gherkin
Dado que m√∫ltiplos candidatos aplicaram para uma vaga
Quando acesso o painel de recrutador
Ent√£o devo ver lista ordenada por score total
E cada candidato deve mostrar score detalhado
E devo poder filtrar por crit√©rios espec√≠ficos
```

## üîí Considera√ß√µes de Seguran√ßa

### Prote√ß√£o de Dados (LGPD)
- Criptografia de senhas com bcrypt
- Dados sens√≠veis em transit e at rest
- Logs de auditoria para acesso a dados
- Consentimento expl√≠cito para processamento

### Autentica√ß√£o e Autoriza√ß√£o
- JWT tokens com expira√ß√£o
- Roles baseados em permiss√µes
- Rate limiting nas APIs
- Valida√ß√£o de entrada rigorosa

### APIs de LLM
- Chaves de API em vari√°veis de ambiente
- Timeout e retry para resili√™ncia
- Sanitiza√ß√£o de dados enviados
- Monitoramento de custos e uso

## üìà M√©tricas e Monitoramento

### KPIs do Sistema
- Tempo m√©dio de an√°lise de curr√≠culo
- Taxa de precis√£o das an√°lises
- Satisfa√ß√£o dos recrutadores
- Volume de candidaturas processadas

### Monitoring T√©cnico
- Lat√™ncia das APIs de LLM
- Taxa de erro nas an√°lises
- Uso de recursos (CPU, mem√≥ria)
- Disponibilidade do sistema

## üîÑ Versionamento e Releases

### Estrat√©gia de Versionamento
- **Semantic Versioning**: MAJOR.MINOR.PATCH
- **Feature Flags**: Para releases graduais
- **Blue-Green Deployment**: Para zero downtime

### Roadmap

#### v1.0 (MVP) - Q1 2025
- [x] Sistema de usu√°rios e autentica√ß√£o
- [x] Cadastro de empresas e vagas
- [ ] Upload e an√°lise b√°sica de curr√≠culos
- [ ] Interface de recrutador b√°sica

#### v1.1 - Q2 2025
- [ ] An√°lise avan√ßada com LangGraph
- [ ] Relat√≥rios em PDF
- [ ] Dashboard de m√©tricas
- [ ] API para integra√ß√µes

#### v2.0 - Q3 2025
- [ ] IA explic√°vel (XAI)
- [ ] An√°lise de vi√©s e fairness
- [ ] Integra√ß√£o com ATS externos
- [ ] Mobile app

---

**Documento Vers√£o:** 1.0  
**√öltima Atualiza√ß√£o:** Janeiro 2025  
**Respons√°vel T√©cnico:** Equipe de Desenvolvimento  
**Status:** üü° Em Desenvolvimento